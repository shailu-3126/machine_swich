name: CI â€“ Machine Switch Demo

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  shared-runner:
    name: Run on GitHub-hosted runner
    if: vars.MACHINE_SWITCH == 'FALSE'
    runs-on: ubuntu-latest

    steps:
      - name: Show runner info
        run: |
          echo "Running on GitHub-hosted runner"
          echo "MACHINE_SWITCH=${{ vars.MACHINE_SWITCH }}"
          uname -a

  self-hosted-runner:
    name: Run on Self-hosted runner
    if: vars.MACHINE_SWITCH == 'TRUE'
    runs-on: self-hosted

    steps:
      - name: Show runner info
        run: |
          echo "Running on Self-hosted runner"
          echo "MACHINE_SWITCH=${{ vars.MACHINE_SWITCH }}"
          hostname
